(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[908],{5330:function(e,t,r){Promise.resolve().then(r.bind(r,195))},195:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var s=r(7437),n=r(2265),l=r(1789),i=r(6463),a=r(970),o=r(5345),c=r(2462),u=r(8002);let d=(0,n.createContext)({drumClicks:[],stickClick:[],drumHit:[],setDrumHit:()=>{},setDrumClicks:()=>{},setStickClicks:()=>{}}),f=e=>{let{children:t}=e,[r,l]=(0,n.useState)([0]),[i,a]=(0,n.useState)([0]),[o,c]=(0,n.useState)([0]);return(0,s.jsx)(d.Provider,{value:{drumClicks:r,setDrumClicks:l,stickClick:i,setStickClicks:a,drumHit:o,setDrumHit:c},children:t})},m=()=>{let e=(0,n.useContext)(d);if(!e)throw Error("component not under context provider");return e};var h=e=>{let{startTime:t,isSurvey:r,isGameActive:l}=e,[i,a]=(0,n.useState)(!0),[o,c]=(0,n.useState)(0),u=(0,n.useRef)(i),{drumClicks:d,setStickClicks:f,setDrumHit:h}=m(),x=[600,400];return(0,n.useEffect)(()=>{u.current=i},[i]),(0,n.useEffect)(()=>{let e;return e=setInterval(()=>{c(e=>e+1<x.length?e+1:0)},15e3),()=>{clearInterval(e)}},[t]),(0,n.useEffect)(()=>{let e;return e=setInterval(()=>{a(e=>!e);let e=parseFloat(((Date.now()-t)/1e3).toFixed(2));r&&l&&(f(t=>[...t,e]),h(e=>[...e,d[d.length-1]||0]))},x[o]),()=>{clearInterval(e)}},[o,r,l,t,d]),(0,s.jsxs)("svg",{width:450,height:450,viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"iconify iconify--emojione",transform:"scale(-1 1)",children:[(0,s.jsx)("path",{fill:"#ed4c5c",d:"M60.1 52.1 32 58.5 3.9 52.1V34.2h56.2z"}),(0,s.jsx)("path",{d:"M32 37.7S8.6 37.1 2 27.3V33s3.2 8.5 30 8.5S62 33 62 33v-5.7c-6.6 9.8-30 10.4-30 10.4",fill:"#b2c1c0"}),(0,s.jsx)("path",{d:"M32 16.9c-16.6 0-30 4.7-30 10.4s13.4 10.4 30 10.4S62 33 62 27.3 48.6 16.9 32 16.9",fill:"#e8e8e8"}),(0,s.jsx)("path",{d:"M32 56.6S8.6 56 2 46.2v5.7s3.2 8.5 30 8.5 30-8.5 30-8.5v-5.7C55.4 56 32 56.6 32 56.6",fill:"#b2c1c0"}),(0,s.jsx)("path",{d:"M60.1 42.6v3.6c0 5.2-12.6 9.5-28.1 9.5S3.9 51.5 3.9 46.2v-3.6C2.7 43.7 2 44.9 2 46.2c0 5.7 13.4 10.4 30 10.4s30-4.7 30-10.4c0-1.3-.7-2.5-1.9-3.6",fill:"#e8e8e8"}),(0,s.jsx)("path",{d:"M32 21.6c13.7 0 25.1 3.3 27.6 7.6.4-.6.6-1.3.6-1.9 0-5.2-12.1-9.5-28.2-9.5S3.9 22.2 3.9 27.3c0 .6.2 1.3.5 1.9 2.6-4.3 14-7.6 27.6-7.6",fill:"#b2c1c0"}),(0,s.jsx)("path",{d:"M32 36.4c14 0 25-3 27.6-7.1-2.5-4.4-13.9-7.6-27.6-7.6-13.6 0-25 3.3-27.6 7.6 2.5 4.1 13.5 7.1 27.6 7.1",fill:i?"yellow":"#fff"}),(0,s.jsx)("path",{d:"M46.5 23.4c-.6-.3-1.2-.5-1.7-.5L8.6 2c-.5-.2-1.9 2.1-1.4 2.4l36.7 20.2c.2.4.7.9 1.2 1.2 3.5 2 4.9-.4 1.4-2.4",fill:"#d3976e",style:{transform:i?"rotateZ(8deg)":"rotateZ(350deg)"}}),(0,s.jsx)("path",{d:"M3.9 53.3v3.8c0 1.5 5.6 1.5 5.6 0v-3.8z",fill:"#b2c1c0"}),(0,s.jsx)("ellipse",{cx:6.7,cy:53.3,rx:2.8,ry:.9,fill:"#e8e8e8"}),(0,s.jsx)("path",{d:"M5.8 38.6v14.6c0 .3.4.5.9.5s.9-.2.9-.5V38.6z",fill:"#8a8e91"}),(0,s.jsx)("path",{d:"M3.9 34.4v3.8c0 1.5 5.6 1.5 5.6 0v-3.8z",fill:"#b2c1c0"}),(0,s.jsx)("ellipse",{cx:6.7,cy:34.4,rx:2.8,ry:.9,fill:"#e8e8e8"}),(0,s.jsx)("path",{d:"M54.5 53.3v3.8c0 1.5 5.6 1.5 5.6 0v-3.8z",fill:"#b2c1c0"}),(0,s.jsx)("ellipse",{cx:57.3,cy:53.3,rx:2.8,ry:.9,fill:"#e8e8e8"}),(0,s.jsx)("path",{d:"M56.4 38.6v14.6c0 .3.4.5.9.5s.9-.2.9-.5V38.6z",fill:"#8a8e91"}),(0,s.jsx)("path",{d:"M54.5 34.4v3.8c0 1.5 5.6 1.5 5.6 0v-3.8z",fill:"#b2c1c0"}),(0,s.jsx)("ellipse",{cx:57.3,cy:34.4,rx:2.8,ry:.9,fill:"#e8e8e8"}),(0,s.jsx)("path",{d:"M38.6 57.1v3.8c0 1.5 5.6 1.5 5.6 0v-3.8z",fill:"#b2c1c0"}),(0,s.jsx)("ellipse",{cx:41.4,cy:57.1,rx:2.8,ry:.9,fill:"#e8e8e8"}),(0,s.jsx)("path",{d:"M40.4 42.4V57c0 .3.4.5.9.5s.9-.2.9-.5V42.4z",fill:"#8a8e91"}),(0,s.jsx)("path",{d:"M38.6 38.2V42c0 1.5 5.6 1.5 5.6 0v-3.8z",fill:"#b2c1c0"}),(0,s.jsx)("ellipse",{cx:41.4,cy:38.2,rx:2.8,ry:.9,fill:"#e8e8e8"}),(0,s.jsx)("path",{d:"M19.8 57.1v3.8c0 1.5 5.6 1.5 5.6 0v-3.8z",fill:"#b2c1c0"}),(0,s.jsx)("ellipse",{cx:22.6,cy:57.1,rx:2.8,ry:.9,fill:"#e8e8e8"}),(0,s.jsx)("path",{d:"M21.7 42.4V57c0 .3.4.5.9.5s.9-.2.9-.5V42.4z",fill:"#8a8e91"}),(0,s.jsx)("path",{d:"M19.8 38.2V42c0 1.5 5.6 1.5 5.6 0v-3.8z",fill:"#b2c1c0"}),(0,s.jsx)("ellipse",{cx:22.6,cy:38.2,rx:2.8,ry:.9,fill:"#e8e8e8"})]})},x=r(232),v=r(5783),p=e=>{let{startTime:t,isSurvey:r,isGameActive:l}=e,[i,a]=(0,n.useState)(!1),{setDrumClicks:o}=m(),c=(0,v.Z)("/audio/drum-hit.mp3");return(0,n.useEffect)(()=>{if(i){let e=setTimeout(()=>{a(!1)},300);return()=>clearTimeout(e)}},[i]),(0,s.jsx)("div",{className:"w-full h-52 ".concat(i?"bg-yellow-300":"bg-gray-200"," highlight:bg-gray-300 border-[10px] border-gray-400 rounded-t-lg cursor-pointer focus:ring"),style:{borderRadius:"50% 50% 50% 50% / 60% 60% 40% 40%"},onClick:()=>{a(!0),c();let e=parseFloat(((Date.now()-t)/1e3).toFixed(2));r&&l&&o(t=>[...t,e])}})},y=r(8582),g=e=>{let{isSurvey:t=!1}=e,[r,l]=(0,n.useState)(!1),[d,f]=(0,n.useState)(!1),[v,g]=(0,n.useState)(!1),[w,j]=(0,n.useState)(0),[S,b]=(0,n.useState)(null),[E,k]=(0,n.useState)({}),{stickClick:T,drumHit:N}=m(),{windowSize:D,deviceType:C}=(0,u.Z)(),{state:F,dispatch:M}=(0,c.y)(),_=(0,i.useSearchParams)(),A=(0,n.useRef)(),R=parseInt(_.get("attempt")||"0"),z=R<3?"".concat(y.j6.surveyRoute,"?attempt=").concat(R+1):null;(0,n.useEffect)(()=>{t&&V()},[t]),(0,n.useEffect)(()=>{(null==S?void 0:S.isTimeOver)&&!v&&(P(S),g(!0))},[v,S]);let V=()=>{j(Date.now()),f(!0),O()},O=()=>{let{endTimePromise:e,stopTimer:t}=(0,o.H)(3e4);return A.current=t,e.then(b),()=>{A.current&&A.current()}},L=(0,n.useCallback)(()=>{if(A.current)return A.current()},[]),P=(0,n.useCallback)(async function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&(f(!1),l(!0),k(t=>{let s={...t,timeTaken:e.timeTaken,timrLimit:(null==e?void 0:e.timeLimit)||"",endTime:(null==e?void 0:e.endTime)||"",startTime:(null==e?void 0:e.startTime)||"",closedWithTimeout:(null==e?void 0:e.isTimeOver)||!1,screenHeight:D.height,screenWidth:D.width,drumPress:N,stickHit:T,closedMidWay:r,deviceType:C};return M({type:"UPDATE_SURVEY_DATA",attempt:R,task:y.j6.id,data:s}),s}))},[t,S,R,T,N]);return(0,s.jsxs)("div",{className:"relative w-screen h-screen overflow-hidden",children:[t&&(0,s.jsx)(x.Z,{handlePressAction:()=>{P(L(),!0)}}),(0,s.jsxs)("div",{className:"relative w-full h-full flex flex-col justify-center items-center gap-4",children:[(0,s.jsx)("div",{className:"absolute top-24",children:(0,s.jsx)(h,{startTime:w,isSurvey:t,isGameActive:d})}),(0,s.jsx)("div",{className:"w-full px-12 absolute bottom-0 pt-20",children:(0,s.jsx)(p,{startTime:w,isSurvey:t,isGameActive:d})})]}),t&&(0,s.jsx)(a.Z,{showFilter:r,msg:y.j6.taskEndMessage,testName:y.j6.title,reAttemptUrl:z})]})},w=r(8214),j=r(872);let S=()=>{let[e,t]=(0,n.useState)(!1),r=()=>{t(!e)};return(0,s.jsx)(s.Fragment,{children:e?(0,s.jsx)(j.Z,{isFullScreen:e,children:(0,s.jsx)(g,{isSurvey:!0})}):(0,s.jsxs)("div",{className:"w-full h-full overflow-hidden",children:[(0,s.jsx)(l.Z,{taskName:y.j6.title,taskMessage:y.j6.taskMessage,handleStartGame:()=>r()}),(0,s.jsx)(g,{})]})})};function b(){return(0,s.jsx)(w.Z,{children:(0,s.jsx)(f,{children:(0,s.jsx)(S,{})})})}},232:function(e,t,r){"use strict";var s=r(7437),n=r(2265);t.Z=e=>{let{handlePressAction:t}=e,[r,l]=(0,n.useState)(null),i=e=>{r&&r!==e?(console.log("close action will handle"),t(),l(null)):(l(e),setTimeout(()=>{l(null)},5e3))};return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"z-50 fixed right-0 top-0 p-3 cursor-pointer w-16 h-16 ",onClick:()=>i("top")}),(0,s.jsx)("div",{className:"z-50 fixed right-0 bottom-0 p-3 cursor-pointer w-16 h-16",onClick:()=>i("bottom")})]})}},872:function(e,t,r){"use strict";var s=r(7437),n=r(2265);t.Z=e=>{let{isFullScreen:t,children:r}=e,l=(0,n.useRef)(null);(0,n.useEffect)(()=>{t?i():a()},[t]);let i=async()=>{try{if(l.current){let e=l.current;e.requestFullscreen?await e.requestFullscreen():e.mozRequestFullScreen?await e.mozRequestFullScreen():e.webkitRequestFullscreen?await e.webkitRequestFullscreen():e.msRequestFullscreen&&await e.msRequestFullscreen()}}catch(e){console.error("Error trying to enter fullscreen mode:",e)}},a=async()=>{try{document.fullscreenElement&&(document.exitFullscreen?await document.exitFullscreen():document.mozCancelFullScreen?await document.mozCancelFullScreen():document.webkitExitFullscreen?await document.webkitExitFullscreen():document.msExitFullscreen&&await document.msExitFullscreen())}catch(e){console.error("Error trying to exit fullscreen mode:",e)}};return(0,s.jsx)("div",{ref:l,style:{height:"100vh",width:"100vw",backgroundColor:"#f0f0f0"},children:r})}},970:function(e,t,r){"use strict";var s=r(7437),n=r(9891),l=r(6463);t.Z=e=>{let{showFilter:t,msg:r,testName:i,reAttemptUrl:a}=e,o=(0,l.useRouter)();return(0,s.jsx)(n.Z,{show:t,slideBottom:!0,children:(0,s.jsx)("div",{className:"fixed top-0 right-0 left-0 botom-0  w-full h-full flex items-center align-middle justify-center align-center overflow-y-auto bg-black",children:(0,s.jsx)("div",{className:"relative p-4 w-full max-w-xl max-h-full",children:(0,s.jsxs)("div",{className:"relative bg-white rounded-lg shadow ",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[(0,s.jsx)("h3",{className:"text-xl capitalize text-center font-semibold text-gray-900",children:"Hurray, ".concat(i," Test Completed!!")}),(0,s.jsxs)("button",{className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:()=>o.push("/survey"),children:[(0,s.jsx)("svg",{className:"w-3 h-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:(0,s.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),(0,s.jsx)("span",{className:"sr-only",children:"Close modal"})]})]}),(0,s.jsx)("div",{className:"p-4 md:p-5 space-y-4",children:(0,s.jsx)("p",{className:"text-base leading-relaxed text-gray-300 dark:text-gray-600 flex gap-2",children:r})}),(0,s.jsxs)("div",{className:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600",children:[(0,s.jsx)("button",{onClick:()=>o.push("/survey"),className:"capitalize  text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center  dark:hover:bg-red-700 dark:focus:ring-red-800",children:"Go to Dashboard"}),a&&(0,s.jsx)("button",{onClick:()=>{window.location&&(window.location.href=a)},className:"cursor-pointer ms-3 text-gray-200 bg-gray-800 hover:bg-gray-700 focus:ring-4 focus:outline-none focus:ring-red-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5",children:"Create New Attempt"})]})]})})})})}},7257:function(e,t,r){"use strict";r.d(t,{Y:function(){return n},g:function(){return s}});let s={LOGGED_IN_USER:"start_user",MFA_ACCESS_TOKEN:"x-secure-token",MFA_REFRESH_TOKEN:"x-refresh-token",SELECTED_COUNTRY:"psychSelectedCountry",SELECTED_COUNTRY_NAME:"psychSelectedCountryName",SELECTED_VENDORCODE:"psychSelectedVendorCode",SELECTED_LANGUAGE:"psychSelectedLanguageFilter",BASE_URL:"https://x3qrf2-3000.csb.app/api/v1",SURVEY_DATA:"surveyData"},n={surveyDB:"survey",surveyData:"surveyData",useData:"user",tempVideo:"tempVideo",temporaryDB:"temporary"}},5783:function(e,t,r){"use strict";var s=r(2265);t.Z=e=>{let[t,r]=(0,s.useState)(null);return(0,s.useEffect)(()=>{if(e){let t=new Audio(e);t.preload="auto",r(t)}return()=>{t&&(t.pause(),t.currentTime=0,t.src="")}},[e]),async()=>{if(t)try{await t.play()}catch(e){console.error("Failed to play the audio:",e)}}}},8002:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var s=r(2265);function n(){let[e,t]=(0,s.useState)({width:void 0,height:void 0}),[r,n]=(0,s.useState)(void 0);(0,s.useEffect)(()=>{let e=()=>{t({width:window.innerWidth,height:window.innerHeight})};return"undefined"!=typeof navigator&&n(navigator.userAgent),window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]);let l="number"==typeof(null==e?void 0:e.width)&&(null==e?void 0:e.width)<768,i="number"==typeof(null==e?void 0:e.width)&&(null==e?void 0:e.width)>=768;return{windowSize:e,isMobile:l,isDesktop:i,deviceType:r}}},2462:function(e,t,r){"use strict";r.d(t,{SurveyProvider:function(){return h},y:function(){return x}});var s=r(7437),n=r(7257);let{childID:l,childDOB:i,childGender:a}=(0,r(7413).jy)(n.g.LOGGED_IN_USER,!0)||{},o=e=>({assestment_id:e,noOfAttempt:0,attempt1:{},attempt2:{},attempt3:{},userID:""});o("BubblePoppingTask"),o("MotorFollowingTask"),o("ButtonTask");let c=["BubblePoppingTask","DelayedGratificationTask","MotorFollowingTask","ButtonTask","SynchronyTask","LanguageSamplingTask","WheelTask","PreferentialLookingTask"].reduce((e,t)=>(e[t]={...o(t),userID:l,userDOB:i,userGender:a},e),{});var u=r(1064),d=r(2265);let f=(0,d.createContext)(void 0),m=(e,t)=>{switch(t.type){case"SET_SURVEY_DATA":return{...e,...t.payload};case"UPDATE_SURVEY_DATA":var r;return{...e,[t.task]:{...e[t.task],noOfAttempt:t.attempt,["attempt".concat(t.attempt)]:{...null===(r=e[t.task])||void 0===r?void 0:r["attempt".concat(null==t?void 0:t.attempt)],...t.data}}};default:return{...e}}},h=e=>{let{children:t}=e,[r,l]=(0,d.useReducer)(m,c),[i,a]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{(async()=>{try{let e=await (0,u.VS)(n.Y.surveyDB,n.Y.surveyData);e&&!i&&l({type:"SET_SURVEY_DATA",payload:e})}catch(e){console.error("Failed to load persisted survey state:",e)}finally{a(!0)}})()},[i]),(0,d.useEffect)(()=>{i&&(async()=>{try{await (0,u.TP)(n.Y.surveyDB,n.Y.surveyData,r)}catch(e){console.error("Failed to save survey state:",e)}})()},[r,i]),(0,s.jsx)(f.Provider,{value:{state:r,dispatch:l},children:t})},x=()=>{let e=(0,d.useContext)(f);if(!e)throw Error("useSurveyContext must be used within a SurveyProvider");return e}},1064:function(e,t,r){"use strict";function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise((r,s)=>{let n=indexedDB.open(e,t);n.onsuccess=()=>r(n.result),n.onerror=()=>s("Failed to open database: ".concat(e)),n.onupgradeneeded=()=>{let e=n.result;e.objectStoreNames.contains("data")||e.createObjectStore("data")}})}async function n(e,t,r){try{let n=await s(e),l=n.transaction("data","readwrite");l.objectStore("data").put(r,t),l.oncomplete=()=>{n.close()},l.onerror=t=>{console.error("Transaction error in ".concat(e,":"),t)}}catch(t){console.error("Error setting value in ".concat(e,":"),t)}}async function l(e,t){try{let r=await s(e);return new Promise((s,n)=>{let l=r.transaction("data","readonly").objectStore("data").get(t);l.onsuccess=()=>{let e=l.result;s(e),r.close()},l.onerror=()=>{n("Failed to retrieve data from ".concat(e)),r.close()}})}catch(t){return console.error("Error getting value from ".concat(e,":"),t),null}}r.d(t,{TP:function(){return n},VS:function(){return l}})},7413:function(e,t,r){"use strict";function s(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("localStorage"in window)try{let r=window.localStorage.getItem(e);if(!r)return null;if(!t)return r;if(r)return JSON.parse(r)}catch(e){}return null}function n(e,t,r){if("localStorage"in window)try{r?window.localStorage.setItem(e,JSON.stringify(t)):"string"==typeof t&&window.localStorage.setItem(e,t)}catch(e){console.log(e)}return null}r.d(t,{jy:function(){return s},uN:function(){return n}})},5345:function(e,t,r){"use strict";r.d(t,{H:function(){return n}});let s=e=>new Date(new Date(e).getTime()).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",hour12:!0}),n=e=>{let t;let r=Date.now(),n=s(r);return{endTimePromise:new Promise(r=>{t=setTimeout(()=>{r(Date.now())},e)}).then(t=>{let l=t-r;return{startTime:n,endTime:s(t),timeLimit:e,isTimeOver:l>=e,timeTaken:l}}),stopTimer:()=>{clearTimeout(t);let l=Date.now(),i=l-r;return{startTime:n,endTime:s(l),timeLimit:e,isTimeOver:i>=e,timeTaken:i}}}}}},function(e){e.O(0,[7,642,971,275,744],function(){return e(e.s=5330)}),_N_E=e.O()}]);